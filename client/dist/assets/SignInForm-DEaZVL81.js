import{w as p,H as g,r as x,G as f,j as s,J as S}from"./index-jdee_lUX.js";import{u as h,N as j,P as b,T as m}from"./use-form--l4Cz_D3.js";import{C as w}from"./Container-BN4N0sYD.js";import{L as y}from"./LoadingOverlay-BkWl8Nrx.js";import{G as P}from"./Group-BGQGWzuk.js";import{B as I}from"./Button--bmL5SZH.js";import"./Transition-BXtJ1OKc.js";const L=()=>{const e=p(),[i,{isLoading:n}]=g(),[r,o]=x.useState(null);return{handleSignin:async a=>{try{const t=await i(a).unwrap(),{username:l,email:u}=t.user,{token:d}=t;document.cookie=`token=${d}; path=/; max-age=86400; SameSite=Strict; Secure`,e(f({username:l,email:u})),o({color:"green",message:"Signin successful!"})}catch(t){console.log(t),o({color:"red",message:"signin failed!"})}},notification:r,setNotification:o,isLoading:n}},E=()=>{const e=h({initialValues:{username:"",password:""}}),{handleSignin:i,notification:n,setNotification:r,isLoading:o}=L(),c=async a=>{await i(a),e.reset()};return s.jsxs(w,{m:"md",children:[s.jsx(y,{visible:o,loaderProps:s.jsx(S,{})}),n&&s.jsx(j,{color:n.color,onClose:()=>r(null),children:n.message}),s.jsx(b,{bd:"1px solid blue.8",p:"lg",radius:"sm",children:s.jsxs("form",{onSubmit:e.onSubmit(c),children:[s.jsx(m,{mt:"md",label:"Username",placeholder:"Username",...e.getInputProps("username")}),s.jsx(m,{mt:"md",label:"Password",placeholder:"Password",type:"password",...e.getInputProps("password")}),s.jsx(P,{justify:"center",mt:"xl",children:s.jsx(I,{type:"submit",children:"Sign In"})})]})})]})};export{E as default};
