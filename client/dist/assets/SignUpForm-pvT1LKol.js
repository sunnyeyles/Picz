import{w as u,F as g,r as f,G as x,j as s,H as S}from"./index-Bgmcq9v8.js";import{u as h,N as w,P as j,T as n}from"./use-form-C5kgqOqH.js";import{C as P}from"./Container-CEe_NUhf.js";import{L as b}from"./LoadingOverlay-BhFfzByh.js";import{G as y}from"./Group-cN5Aqtbk.js";import{B as I}from"./Button-FQjs_v2g.js";import"./Transition-D8MkP4-q.js";const C=()=>{const e=u(),[i,{isLoading:r}]=g(),[l,a]=f.useState(null);return{handleSignup:async o=>{try{const t=await i(o).unwrap();a({color:"green",message:"Signup successful!"});const{token:d,username:p,email:c}=t;document.cookie=`token=${d}; path=/; msax-age=${60*60*24}; SameSite=Strict; Secure`,e(x({username:p,email:c}))}catch(t){console.log(t),a({color:"red",message:"Signup failed!"})}},notification:l,setNotification:a,isLoading:r}},G=()=>{const e=h({initialValues:{username:"",email:"",password:"",confirmPassword:""},validate:{email:o=>/^\S+@\S+$/.test(o)?null:"Invalid email",confirmPassword:(o,t)=>o!==t.password?"Passwords did not match":null}}),{handleSignup:i,notification:r,setNotification:l,isLoading:a}=C(),m=async o=>{i(o),e.reset()};return s.jsxs(P,{m:"md",children:[s.jsx(b,{visible:a,loaderProps:s.jsx(S,{})}),r&&s.jsx(w,{color:r.color,onClose:()=>l(null),children:r.message}),s.jsx(j,{bd:"1px solid blue.8",p:"lg",radius:"sm",children:s.jsxs("form",{onSubmit:e.onSubmit(m),children:[s.jsx(n,{mt:"md",label:"Username",placeholder:"Username",...e.getInputProps("username")}),s.jsx(n,{mt:"md",label:"Email",placeholder:"Email",...e.getInputProps("email")}),s.jsx(n,{mt:"md",label:"Password",placeholder:"Password",type:"password",...e.getInputProps("password")}),s.jsx(n,{mt:"md",label:"Confirm Password",placeholder:"Confirm Password",type:"password",...e.getInputProps("confirmPassword")}),s.jsx(y,{justify:"center",mt:"xl",children:s.jsx(I,{type:"submit",loading:a,children:"Sign Up"})})]})})]})};export{G as default};
