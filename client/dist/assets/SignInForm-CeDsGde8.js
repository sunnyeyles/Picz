import{s as p,E as g,r as f,D as h,j as s}from"./index-nOu4IbS4.js";import{u as x,N as S,P as j,T as m}from"./use-form-BX9Jdg9P.js";import{C as b}from"./Container-B5SgTnIA.js";import{L as w}from"./LoadingOverlay-DaAE8JIi.js";import{G as y}from"./Group-Ck4vVODZ.js";import{B as I}from"./Button-y8XREASK.js";import"./polymorphic-factory-e6TTGQ6v.js";import"./Transition-BDbwtbS3.js";const P=()=>{const e=p(),[i,{isLoading:t}]=g(),[r,n]=f.useState(null);return{handleSignin:async a=>{try{const o=await i(a).unwrap(),{username:c,email:u}=o.user,{token:d}=o;document.cookie=`token=${d}; path=/; max-age=86400; SameSite=Strict; Secure`,e(h({username:c,email:u})),localStorage.setItem("user: ",c),n({color:"green",message:"Signin successful!"})}catch(o){throw n({color:"red",message:"signin failed!"}),o}},notification:r,setNotification:n,isLoading:t}},D=()=>{const e=x({initialValues:{username:"",password:""}}),{handleSignin:i,notification:t,setNotification:r,isLoading:n}=P(),l=async a=>{await i(a),e.reset()};return s.jsxs(b,{m:"md",children:[s.jsx(w,{visible:n}),t&&s.jsx(S,{color:t.color,onClose:()=>r(null),children:t.message}),s.jsx(j,{bd:"1px solid blue.8",p:"lg",radius:"sm",children:s.jsxs("form",{onSubmit:e.onSubmit(l),children:[s.jsx(m,{mt:"md",label:"Username",placeholder:"Username",...e.getInputProps("username")}),s.jsx(m,{mt:"md",label:"Password",placeholder:"Password",type:"password",...e.getInputProps("password")}),s.jsx(y,{justify:"center",mt:"xl",children:s.jsx(I,{type:"submit",children:"Sign In"})})]})})]})};export{D as default};
