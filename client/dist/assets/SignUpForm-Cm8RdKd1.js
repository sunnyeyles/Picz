import{w as u,J as g,r as f,K as x,j as s,N as S}from"./index-C-eU99ou.js";import{u as h,N as w,P as j,T as t}from"./use-form-BMelOdAE.js";import{C as P}from"./Container-CDALcLJH.js";import{L as b,B as y}from"./LoadingOverlay-BmApxcsK.js";import{G as I}from"./Group-MfgOYBup.js";const C=()=>{const e=u(),[i,{isLoading:r}]=g(),[l,a]=f.useState(null);return{handleSignup:async o=>{try{const n=await i(o).unwrap();a({color:"green",message:"Signup successful!"});const{token:d,username:c,email:p}=n;document.cookie=`token=${d}; path=/; msax-age=${60*60*24}; SameSite=Strict; Secure`,e(x({username:c,email:p}))}catch(n){console.log(n),a({color:"red",message:"Signup failed!"})}},notification:l,setNotification:a,isLoading:r}},k=()=>{const e=h({initialValues:{username:"",email:"",password:"",confirmPassword:""},validate:{email:o=>/^\S+@\S+$/.test(o)?null:"Invalid email",confirmPassword:(o,n)=>o!==n.password?"Passwords did not match":null}}),{handleSignup:i,notification:r,setNotification:l,isLoading:a}=C(),m=async o=>{i(o),e.reset()};return s.jsxs(P,{m:"md",children:[s.jsx(b,{visible:a,loaderProps:s.jsx(S,{})}),r&&s.jsx(w,{color:r.color,onClose:()=>l(null),children:r.message}),s.jsx(j,{bd:"1px solid blue.8",p:"lg",radius:"sm",children:s.jsxs("form",{onSubmit:e.onSubmit(m),children:[s.jsx(t,{mt:"md",label:"Username",placeholder:"Username",...e.getInputProps("username")}),s.jsx(t,{mt:"md",label:"Email",placeholder:"Email",...e.getInputProps("email")}),s.jsx(t,{mt:"md",label:"Password",placeholder:"Password",type:"password",...e.getInputProps("password")}),s.jsx(t,{mt:"md",label:"Confirm Password",placeholder:"Confirm Password",type:"password",...e.getInputProps("confirmPassword")}),s.jsx(I,{justify:"center",mt:"xl",children:s.jsx(y,{type:"submit",loading:a,children:"Sign Up"})})]})})]})};export{k as default};
