import{w as u,H as g,r as f,J as S,j as s,K as h}from"./index-Cxj4aO93.js";import{u as x,N as w,T as r}from"./use-form-BSLN8IR5.js";import{C as j}from"./Container-DSvad0L2.js";import{L as P,B as b}from"./LoadingOverlay-DTpiLQYS.js";import{G as y}from"./Group-DYSC0JXo.js";import"./__commonjsHelpers__-CqkleIqs.js";const I=()=>{const o=u(),[i,{isLoading:n}]=g(),[l,a]=f.useState(null);return{handleSignup:async e=>{try{const t=await i(e).unwrap();a({color:"green",message:"Signup successful!"});const{token:c,username:d,email:p}=t;document.cookie=`token=${c}; path=/; msax-age=${60*60*24}; SameSite=Strict; Secure`,o(S({username:d,email:p}))}catch(t){console.log(t),a({color:"red",message:"Signup failed!"})}},notification:l,setNotification:a,isLoading:n}},k=()=>{const o=x({initialValues:{username:"",email:"",password:"",confirmPassword:""},validate:{email:e=>/^\S+@\S+$/.test(e)?null:"Invalid email",confirmPassword:(e,t)=>e!==t.password?"Passwords did not match":null}}),{handleSignup:i,notification:n,setNotification:l,isLoading:a}=I(),m=async e=>{i(e)};return s.jsxs(j,{m:"md",children:[s.jsx(P,{visible:a,loaderProps:s.jsx(h,{})}),n&&s.jsx(w,{color:n.color,onClose:()=>l(null),children:n.message}),s.jsxs("form",{onSubmit:o.onSubmit(m),children:[s.jsx(r,{mt:"md",label:"Username",placeholder:"Username",...o.getInputProps("username")}),s.jsx(r,{mt:"md",label:"Email",placeholder:"Email",...o.getInputProps("email")}),s.jsx(r,{mt:"md",label:"Password",placeholder:"Password",type:"password",...o.getInputProps("password")}),s.jsx(r,{mt:"md",label:"Confirm Password",placeholder:"Confirm Password",type:"password",...o.getInputProps("confirmPassword")}),s.jsx(y,{justify:"center",mt:"xl",children:s.jsx(b,{type:"submit",loading:a,children:"Sign Up"})})]})]})};export{k as default};
