import{s as u,C as g,r as f,D as h,j as s}from"./index-nOu4IbS4.js";import{u as x,N as S,P as w,T as n}from"./use-form-BX9Jdg9P.js";import{C as P}from"./Container-B5SgTnIA.js";import{L as j}from"./LoadingOverlay-DaAE8JIi.js";import{G as b}from"./Group-Ck4vVODZ.js";import{B as y}from"./Button-y8XREASK.js";import"./polymorphic-factory-e6TTGQ6v.js";import"./Transition-BDbwtbS3.js";const C=()=>{const o=u(),[i,{isLoading:a}]=g(),[l,r]=f.useState(null);return{handleSignup:async e=>{try{const t=await i(e).unwrap();r({color:"green",message:"Signup successful!"});const{token:c,username:p,email:d}=t;document.cookie=`token=${c}; path=/; msax-age=${60*60*24}; SameSite=Strict; Secure`,o(h({username:p,email:d}))}catch(t){console.log(t),r({color:"red",message:"Signup failed!"})}},notification:l,setNotification:r,isLoading:a}},$=()=>{const o=x({initialValues:{username:"",email:"",password:"",confirmPassword:""},validate:{email:e=>/^\S+@\S+$/.test(e)?null:"Invalid email",confirmPassword:(e,t)=>e!==t.password?"Passwords did not match":null}}),{handleSignup:i,notification:a,setNotification:l,isLoading:r}=C(),m=async e=>{console.log(e),i(e),o.reset()};return s.jsxs(P,{m:"md",children:[s.jsx(j,{visible:r,loaderProps:{size:"lg",color:"blue"}}),a&&s.jsx(S,{color:a.color,onClose:()=>l(null),children:a.message}),s.jsx(w,{bd:"1px solid blue.8",p:"lg",radius:"sm",children:s.jsxs("form",{onSubmit:o.onSubmit(m),children:[s.jsx(n,{mt:"md",label:"Username",placeholder:"Username",...o.getInputProps("username")}),s.jsx(n,{mt:"md",label:"Email",placeholder:"Email",...o.getInputProps("email")}),s.jsx(n,{mt:"md",label:"Password",placeholder:"Password",type:"password",...o.getInputProps("password")}),s.jsx(n,{mt:"md",label:"Confirm Password",placeholder:"Confirm Password",type:"password",...o.getInputProps("confirmPassword")}),s.jsx(b,{justify:"center",mt:"xl",children:s.jsx(y,{type:"submit",loading:r,children:"Sign Up"})})]})})]})};export{$ as default};
